{%- comment -%}
  Teaching item renderer for a Jekyll collection: site.teaching
  Recommended front matter:
    - title (e.g., "ISE 2214 Lab")
    - course (e.g., "ISE 2214")  [optional]
    - role (e.g., "Graduate Teaching Assistant")
    - term (e.g., "Fall 2025")
    - institution (e.g., "Virginia Tech")
    - location (optional)
    - date: YYYY-MM-DD (recommended for grouping/sorting)
    - external_url (optional external link)
    - slides / syllabus / recording / materials (optional links)
    - excerpt (optional) or body content as description
{%- endcomment -%}

{%- assign t = post -%}

{%- assign display_title = t.course | default: t.title | default: "Teaching" -%}
{%- assign subtitle = "" -%}
{%- if t.course and t.title and t.title != "" -%}
  {%- assign subtitle = t.title -%}
{%- endif -%}

<article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
  <div class="archive__item-body">

    <h3 class="archive__item-title no_toc" itemprop="headline">
      {%- if t.external_url and t.external_url != "" -%}
        <a href="{{ t.external_url }}" rel="nofollow noopener" target="_blank">{{ display_title }}</a>
      {%- else -%}
        <a href="{{ t.url | relative_url }}">{{ display_title }}</a>
      {%- endif -%}

      {%- if subtitle != "" -%}
        <span style="font-weight: normal;"> — {{ subtitle }}</span>
      {%- endif -%}
    </h3>

    <p class="page__meta">
      {%- if t.role -%}<strong>{{ t.role }}</strong>{%- endif -%}
      {%- if t.term -%}{% if t.role %} · {% endif %}{{ t.term }}{%- endif -%}
      {%- if t.institution -%}{% if t.role or t.term %} · {% endif %}{{ t.institution }}{%- endif -%}
      {%- if t.location -%}{% if t.role or t.term or t.institution %} · {% endif %}{{ t.location }}{%- endif -%}
    </p>

    {%- assign links = "" -%}
    {%- if t.slides -%}
      {%- capture links -%}{{ links }}<a href="{{ t.slides }}" rel="nofollow noopener" target="_blank">Slides</a>{%- endcapture -%}
    {%- endif -%}
    {%- if t.syllabus -%}
      {%- if links != "" -%}{%- capture links -%}{{ links }} · {%- endcapture -%}{%- endif -%}
      {%- capture links -%}{{ links }}<a href="{{ t.syllabus }}" rel="nofollow noopener" target="_blank">Syllabus</a>{%- endcapture -%}
    {%- endif -%}
    {%- if t.recording -%}
      {%- if links != "" -%}{%- capture links -%}{{ links }} · {%- endcapture -%}{%- endif -%}
      {%- capture links -%}{{ links }}<a href="{{ t.recording }}" rel="nofollow noopener" target="_blank">Recording</a>{%- endcapture -%}
    {%- endif -%}
    {%- if t.materials -%}
      {%- if links != "" -%}{%- capture links -%}{{ links }} · {%- endcapture -%}{%- endif -%}
      {%- capture links -%}{{ links }}<a href="{{ t.materials }}" rel="nofollow noopener" target="_blank">Materials</a>{%- endcapture -%}
    {%- endif -%}

    {%- if links != "" -%}
      <p class="archive__item-excerpt" style="margin-top:-0.35em;">
        {{ links }}
      </p>
    {%- endif -%}

    {%- if t.excerpt and t.excerpt != "" -%}
      <p class="archive__item-excerpt" itemprop="description">
        {{ t.excerpt | markdownify | strip_html | strip_newlines }}
      </p>
    {%- else -%}
      {%- assign desc = t.content | markdownify | strip_html | strip_newlines | strip -%}
      {%- if desc != "" -%}
        <p class="archive__item-excerpt" itemprop="description">
          {{ desc }}
        </p>
      {%- endif -%}
    {%- endif -%}

  </div>
</article>
